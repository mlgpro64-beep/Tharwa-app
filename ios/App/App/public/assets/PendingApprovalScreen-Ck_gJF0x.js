import{r as c,u as y,a as v,b as j,d as w,j as e,m as a,C as b,e as N,q as k}from"./index-CzK-Wtpj.js";import{u as A}from"./useQuery-B1e_qTp-.js";import{u as C}from"./useMutation-BXgiM4Zs.js";import{C as T}from"./circle-check-big-BUMRiSQy.js";import{Z as R}from"./zap-DFEP0yYU.js";import{R as q}from"./refresh-cw-CP1D-P28.js";import{L as E}from"./log-out-PQe0qTlg.js";import"./utils-km2FGkQ4.js";const Q=c.memo(function(){const[,r]=y(),{t:L,i18n:u}=v(),{user:O,setUser:o,logout:d}=j(),{toast:n}=w(),t=u.language==="ar",p=window.location.hostname==="localhost",{data:i,refetch:m}=A({queryKey:["/api/users/me"],refetchInterval:1e4}),l=C({mutationFn:async()=>{const s=await N("POST","/api/users/auto-approve");if(!s.ok){const g=await s.json();throw new Error(g.error||"Failed to approve")}return s.json()},onSuccess:s=>{o(s.user),k.invalidateQueries({queryKey:["/api/users/me"]}),n({title:t?"تم الاعتماد بنجاح!":"Approved successfully!",description:t?"تم اعتماد حسابك كمنفذ":"Your account has been approved as a tasker"}),setTimeout(()=>{r("/home")},1e3)},onError:s=>{n({title:t?"خطأ":"Error",description:s.message,variant:"destructive"})}});c.useEffect(()=>{i&&(o(i),i.verificationStatus==="approved"&&r("/home"))},[i,o,r]);const x=()=>{d(),r("/")},h=()=>{m()},f=()=>{l.mutate()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-primary/5 flex items-center justify-center p-6",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(a.div,{initial:{opacity:0},animate:{opacity:.3},className:"absolute top-20 -left-20 w-64 h-64 bg-primary/20 rounded-full blur-3xl"}),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:.2},className:"absolute bottom-40 -right-20 w-80 h-80 bg-accent/20 rounded-full blur-3xl"})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative z-10 w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"glass rounded-3xl p-8 text-center",children:[e.jsx(a.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"w-24 h-24 rounded-full bg-warning/15 flex items-center justify-center mx-auto mb-6",children:e.jsx(b,{className:"w-12 h-12 text-warning"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-3",children:t?"جاري مراجعة حسابك":"Account Under Review"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:t?"شكراً لتسجيلك كمنفذ. فريقنا يراجع طلبك حالياً وسيتم إشعارك فور الموافقة على حسابك.":"Thank you for registering as a tasker. Our team is currently reviewing your application and you will be notified once your account is approved."})]}),e.jsx("div",{className:"glass rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-muted-foreground text-start",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:t?"ماذا يحدث الآن؟":"What happens now?"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:t?"• مراجعة بياناتك وشهادتك":"• Your information and certificate are being reviewed"}),e.jsx("li",{children:t?"• ستتلقى إشعاراً عند الموافقة":"• You will receive a notification upon approval"}),e.jsx("li",{children:t?"• عادةً ما يستغرق 24-48 ساعة":"• Usually takes 24-48 hours"})]})]})]})}),p&&e.jsxs(a.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileTap:{scale:.98},onClick:f,disabled:l.isPending,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-primary to-accent text-white flex items-center justify-center gap-2 font-bold shadow-lg shadow-primary/30 disabled:opacity-50","data-testid":"button-auto-approve",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:t?"اعتماد تلقائي (تطوير)":"Auto Approve (Dev)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(a.button,{whileTap:{scale:.98},onClick:h,className:"flex-1 py-4 px-6 rounded-2xl glass flex items-center justify-center gap-2 font-medium","data-testid":"button-refresh-status",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:t?"تحديث الحالة":"Refresh Status"})]}),e.jsx(a.button,{whileTap:{scale:.98},onClick:x,className:"py-4 px-6 rounded-2xl glass flex items-center justify-center gap-2 text-muted-foreground","data-testid":"button-logout",children:e.jsx(E,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground",children:t?"هل لديك أسئلة؟ تواصل معنا عبر صفحة المساعدة":"Have questions? Contact us through the help page"})]})]})});export{Q as default};
