import{r as m,u as U,a as A,b as B,j as e,m as s,A as q,C as L,h as P,c as j,U as R}from"./index-CzK-Wtpj.js";import{S as v}from"./shield-Cglcz5iT.js";import{A as D}from"./arrow-left-eQXjCarb.js";import{C as V}from"./circle-check-big-BUMRiSQy.js";import{C as y}from"./camera-B3Gnq2Ue.js";import{U as E}from"./upload-CUoyT6Pu.js";import{F as O}from"./file-text-ZpwEK5vc.js";const Q=m.memo(function(){const[,b]=U(),{t}=A(),{userRole:N}=B(),[c,r]=m.useState("intro"),[f,w]=m.useState(null),[u,k]=m.useState(null),[p,C]=m.useState(null);if(N!=="tasker")return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-primary/5 pt-safe pb-32 flex items-center justify-center px-6",children:e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"glass rounded-3xl p-8 text-center max-w-sm",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/15 flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-primary"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t("verification.taskerOnly")}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6",children:t("verification.taskerOnlyDesc")}),e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>window.history.back(),className:"w-full py-3 rounded-2xl gradient-primary text-white font-bold","data-testid":"button-go-back",children:t("common.back")})]})});const T=i=>a=>{var l;const n=(l=a.target.files)==null?void 0:l[0];if(n){const d=new FileReader;d.onload=h=>{var x;i((x=h.target)==null?void 0:x.result)},d.readAsDataURL(n)}},S=()=>{r("pending")},I=[{id:"id-front",label:t("verification.steps.idFront"),done:!!f},{id:"id-back",label:t("verification.steps.idBack"),done:!!u},{id:"selfie",label:t("verification.steps.selfie"),done:!!p}],F=()=>{switch(c){case"intro":return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"glass rounded-3xl p-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full gradient-primary flex items-center justify-center mx-auto mb-5 shadow-lg shadow-primary/30",children:e.jsx(v,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t("verification.title")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("verification.description")})]}),e.jsxs("div",{className:"glass rounded-2xl p-5",children:[e.jsx("h3",{className:"font-bold text-foreground mb-4",children:t("verification.requirements")}),e.jsx("div",{className:"space-y-3",children:[{icon:O,text:t("verification.req.validId")},{icon:y,text:t("verification.req.clearPhoto")},{icon:R,text:t("verification.req.selfie")}].map((o,g)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/15 flex items-center justify-center",children:e.jsx(o.icon,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:"text-sm text-foreground",children:o.text})]},g))})]}),e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>r("id-front"),className:"w-full py-4 rounded-2xl gradient-primary text-white font-bold shadow-lg shadow-primary/30","data-testid":"button-start-verification",children:t("verification.startVerification")})]});case"id-front":case"id-back":case"selfie":const i=c==="id-front",a=c==="id-back",n=c==="selfie",l=i?f:a?u:p,d=i?w:a?k:C,h=t(i?"verification.steps.idFront":a?"verification.steps.idBack":"verification.steps.selfie"),x=t(i?"verification.uploadIdFront":a?"verification.uploadIdBack":"verification.uploadSelfie");return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:I.map((o,g)=>e.jsx("div",{className:j("h-1.5 rounded-full transition-all",o.done||c===o.id?"w-10 gradient-primary":"w-10 bg-muted")},o.id))}),e.jsxs("div",{className:"glass rounded-3xl p-6 text-center",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-2",children:h}),e.jsx("p",{className:"text-muted-foreground text-sm",children:x})]}),e.jsx("div",{className:"glass rounded-3xl p-4",children:l?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l,alt:"Uploaded",className:"w-full h-56 object-cover rounded-2xl"}),e.jsx(s.button,{whileTap:{scale:.95},onClick:()=>d(null),className:"absolute top-3 right-3 w-8 h-8 bg-destructive text-white rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:"X"})})]}):e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{type:"file",accept:"image/*",capture:n?"user":"environment",onChange:T(d),className:"hidden","data-testid":`input-upload-${c}`}),e.jsxs("div",{className:"h-56 border-2 border-dashed border-muted-foreground/30 rounded-2xl flex flex-col items-center justify-center gap-3 transition-colors hover:border-primary/50",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/15 flex items-center justify-center",children:n?e.jsx(y,{className:"w-7 h-7 text-primary"}):e.jsx(E,{className:"w-7 h-7 text-primary"})}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("verification.tapToUpload")})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>{r(i?"intro":a?"id-front":"id-back")},className:"flex-1 py-4 rounded-2xl glass font-bold text-foreground","data-testid":"button-back-step",children:t("common.back")}),e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>{i&&f?r("id-back"):a&&u?r("selfie"):n&&p&&S()},disabled:!l,className:j("flex-1 py-4 rounded-2xl font-bold transition-all",l?"gradient-primary text-white shadow-lg shadow-primary/30":"bg-muted text-muted-foreground"),"data-testid":"button-next-step",children:t(n?"verification.submit":"common.next")})]})]});case"pending":return e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[e.jsxs("div",{className:"glass rounded-3xl p-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-warning/15 flex items-center justify-center mx-auto mb-5",children:e.jsx(L,{className:"w-10 h-10 text-warning"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t("verification.pending.title")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("verification.pending.description")})]}),e.jsx("div",{className:"glass rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"w-5 h-5 text-warning flex-shrink-0"}),e.jsx("p",{className:"text-sm text-muted-foreground text-start",children:t("verification.pending.note")})]})}),e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>b("/profile"),className:"w-full py-4 rounded-2xl gradient-primary text-white font-bold shadow-lg shadow-primary/30","data-testid":"button-back-to-profile",children:t("verification.backToProfile")})]});case"verified":return e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[e.jsxs("div",{className:"glass rounded-3xl p-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-success/15 flex items-center justify-center mx-auto mb-5",children:e.jsx(V,{className:"w-10 h-10 text-success"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:t("verification.verified.title")}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t("verification.verified.description")})]}),e.jsx(s.button,{whileTap:{scale:.98},onClick:()=>b("/profile"),className:"w-full py-4 rounded-2xl gradient-primary text-white font-bold shadow-lg shadow-primary/30","data-testid":"button-back-to-profile",children:t("verification.backToProfile")})]})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-primary/5 pt-safe pb-32",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx(s.div,{initial:{opacity:0},animate:{opacity:.3},className:"absolute top-40 -right-20 w-64 h-64 bg-primary/20 rounded-full blur-3xl rtl:-left-20 rtl:right-auto"})}),e.jsxs("div",{className:"relative z-10 px-6 py-6",children:[e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 mb-8",children:[e.jsx(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.history.back(),className:"w-11 h-11 flex items-center justify-center rounded-2xl glass","data-testid":"button-back",children:e.jsx(D,{className:"w-5 h-5 rtl:rotate-180"})}),e.jsx("h1",{className:"text-2xl font-extrabold text-foreground",children:t("verification.pageTitle")})]}),e.jsx(q,{mode:"wait",children:F()})]})]})});export{Q as default};
