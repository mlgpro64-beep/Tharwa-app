import{r as a,b as y,a as j,j as e,g as v,m as l,c as d,M as N,C as w}from"./index-CzK-Wtpj.js";import{f as C}from"./currency-BA8TA7a2.js";import{g as m,T as u}from"./schema-CbH_BfFp.js";import{H as T}from"./heart-BRsyov3V.js";import{D as S}from"./dollar-sign-EFTHd7iI.js";import{C as A}from"./chevron-right-MByHq59g.js";const B=a.memo(function({task:t,showSaveButton:x=!0,index:H=0}){const{savedTaskIds:g,toggleSavedTask:i}=y(),{i18n:p}=j(),o=g.includes(t.id),n=p.language==="ar",f=a.useMemo(()=>{const s=m(t.category);if(!s)return t.category;if(s.subcategory)return n?s.subcategory.nameAr:s.subcategory.nameEn;const r=u[s.mainCategory];return n?r.nameAr:r.nameEn},[t.category,n]),c=a.useMemo(()=>{var r;const s=m(t.category);return s&&((r=u[s.mainCategory])==null?void 0:r.colorHex)||"#6B7280"},[t.category]),h=a.useCallback(s=>{s.preventDefault(),s.stopPropagation(),i(t.id)},[t.id,i]),b=a.useCallback(s=>{switch(s){case"open":return"bg-success/15 text-success";case"assigned":return"bg-warning/15 text-warning";case"in_progress":return"bg-primary/15 text-primary";case"completed":return"bg-muted text-muted-foreground";case"cancelled":return"bg-destructive/15 text-destructive";default:return"bg-muted text-muted-foreground"}},[]);return e.jsx(v,{href:`/task/${t.id}`,"data-testid":`task-card-${t.id}`,children:e.jsxs(l.div,{whileHover:{y:-2},whileTap:{scale:.985},transition:{type:"spring",stiffness:400,damping:25},className:"glass rounded-[24px] p-5 relative cursor-pointer group",children:[x&&e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":o?"Remove from saved":"Save task",onClick:h,className:"absolute top-4 right-4 w-9 h-9 flex items-center justify-center rounded-xl bg-white/60 dark:bg-white/10 backdrop-blur-sm z-10 transition-all","data-testid":`button-save-task-${t.id}`,children:e.jsx(T,{className:d("w-[18px] h-[18px] transition-all duration-200",o?"fill-destructive text-destructive":"text-muted-foreground group-hover:text-foreground")})}),e.jsx("div",{className:"flex justify-between items-start mb-3 pr-10",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider",style:{backgroundColor:`${c}20`,color:c},children:f}),e.jsx("span",{className:d("px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider",b(t.status)),children:t.status.replace("_"," ")})]}),e.jsx("h3",{className:"text-lg font-bold text-foreground leading-snug pr-2",children:t.title})]})}),e.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-2 leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(N,{className:"w-3.5 h-3.5 text-primary/70"}),e.jsx("span",{className:"max-w-[90px] truncate font-medium",children:t.distance||t.location})]}),e.jsx("span",{className:"text-muted-foreground/30",children:"|"}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(w,{className:"w-3.5 h-3.5 text-primary/70"}),e.jsx("span",{className:"font-medium",children:t.time})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 font-bold text-base text-primary",children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:C(t.budget,{locale:n?"ar":"en"})})]}),e.jsx(A,{className:"w-4 h-4 text-muted-foreground/50 group-hover:text-primary group-hover:translate-x-0.5 transition-all"})]})]})]})})});export{B as T};
