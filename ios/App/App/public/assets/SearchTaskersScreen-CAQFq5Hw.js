import{r as l,a as S,j as e,g as T,m as t,u as C,b as I,S as A,A as v,X as N}from"./index-CzK-Wtpj.js";import{u as D}from"./useQuery-B1e_qTp-.js";import{S as m,E}from"./animated-ifqYnJC-.js";import{P}from"./ProfessionalBadge-PnLml-PX.js";import{A as U,a as $,b as B}from"./avatar-CPrQWbpQ.js";import{S as F}from"./shield-Cglcz5iT.js";import{S as O}from"./star-CdLY6qwL.js";import{C as L}from"./circle-check-big-BUMRiSQy.js";import{C as R}from"./chevron-right-MByHq59g.js";import{A as G}from"./arrow-left-eQXjCarb.js";import"./utils-km2FGkQ4.js";import"./receipt-2PYmiGbT.js";import"./sun-BjJkm-rc.js";import"./arrow-right-CPiXL_Yk.js";import"./award-Dy6u7LjK.js";import"./tag-DcG1YM2n.js";import"./briefcase-CG3vAR-K.js";import"./calendar-CAGmnp_J.js";import"./camera-B3Gnq2Ue.js";import"./palette-Da5ZzNJ9.js";import"./user-check-6ccO8QVr.js";import"./check-BpdMCCzI.js";import"./chevron-down-DDOviN73.js";import"./chevron-left-CHJaYFut.js";import"./circle-x-D3T454mR.js";import"./clipboard-list-B8-J9jf1.js";import"./dollar-sign-EFTHd7iI.js";import"./smartphone-CxZXcd48.js";import"./ellipsis-CWjK1vf2.js";import"./eye-off-D3AByt6D.js";import"./eye-yefYjQ94.js";import"./file-check-B-PxUlvl.js";import"./file-text-ZpwEK5vc.js";import"./filter-CpO21OEq.js";import"./heart-BRsyov3V.js";import"./inbox-DejM70i8.js";import"./loader-circle-AYqjcifH.js";import"./lock-B56TYpix.js";import"./log-in-KhGTY87V.js";import"./log-out-PQe0qTlg.js";import"./mail-DnD_Dbv3.js";import"./message-circle-BzmAey6U.js";import"./message-square--SMsGGZh.js";import"./trash-2-Ce2Bgf6u.js";import"./phone-BU10rKK_.js";import"./refresh-cw-CP1D-P28.js";import"./search-x-C3PLNNx9.js";import"./send-9v2j9KhO.js";import"./settings-wN2QqbeF.js";import"./sparkles-CAG2jcvH.js";import"./trending-up-BEW_fBut.js";import"./upload-CUoyT6Pu.js";import"./users-CYCByTGv.js";import"./wrench-Drh-fOGi.js";import"./zap-DFEP0yYU.js";const w={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.06,delayChildren:.1}}},j={hidden:{opacity:0,y:16},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},J=l.memo(function({tasker:s,index:r}){const{i18n:p}=S(),n=p.language==="ar",u=l.useCallback(d=>d.split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2),[]),c=s.verificationStatus==="approved",h=s.rating?parseFloat(String(s.rating)).toFixed(1):"0.0",o=s.completedTasks||0,x=s.bio?s.bio.length>80?`${s.bio.slice(0,80)}...`:s.bio:null;return e.jsx(T,{href:`/profile/${s.id}`,children:e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},whileHover:{y:-2},whileTap:{scale:.98},className:"glass-premium rounded-3xl p-5 cursor-pointer transition-all duration-200","data-testid":`card-tasker-${s.id}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsxs(U,{className:"w-16 h-16 border-2 border-white/30 shadow-lg",children:[e.jsx($,{src:s.avatar||void 0,alt:s.name}),e.jsx(B,{className:"bg-gradient-to-br from-primary/20 to-accent/20 text-foreground font-bold text-lg",children:u(s.name)})]}),c&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2+r*.05},className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-success flex items-center justify-center shadow-lg shadow-success/30",children:e.jsx(F,{className:"w-3.5 h-3.5 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("h3",{className:"font-bold text-foreground text-lg truncate","data-testid":`text-tasker-name-${s.id}`,children:s.name}),(()=>{const d={location:"SearchTaskersScreen.tsx:99",message:"Rendering TaskerCard",data:{taskerId:s.id,name:s.name,username:s.username,hasUsername:!!s.username},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"};return console.log("[DEBUG] TaskerCard render:",d),fetch("http://127.0.0.1:7242/ingest/a1cd6507-d4e0-471c-acc6-10053f70247e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).catch(()=>{}),null})(),s.username?e.jsxs("p",{className:"text-sm text-muted-foreground truncate","data-testid":`text-tasker-username-${s.id}`,children:["@",s.username]}):(console.log("[DEBUG] TaskerCard: No username for tasker",s.id,s.name),null)]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-4 h-4 text-warning fill-warning"}),e.jsx("span",{className:"text-sm font-semibold text-foreground","data-testid":`text-tasker-rating-${s.id}`,children:h})]}),e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(L,{className:"w-3.5 h-3.5"}),e.jsxs("span",{className:"text-xs font-medium","data-testid":`text-tasker-completed-${s.id}`,children:[o," ",n?"مهمة":"tasks"]})]})]}),s.professionalRoles&&s.professionalRoles.length>0&&e.jsx("div",{className:"mb-2.5","data-testid":`list-tasker-badges-${s.id}`,children:e.jsx(P,{roles:s.professionalRoles,size:"sm",maxDisplay:2})}),x&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2","data-testid":`text-tasker-bio-${s.id}`,children:x})]}),e.jsx(R,{className:"w-5 h-5 text-muted-foreground shrink-0 mt-1 rtl:rotate-180"})]})})})}),q=l.memo(function({count:s=3}){return e.jsx("div",{className:"space-y-4",children:Array.from({length:s}).map((r,p)=>e.jsx("div",{className:"glass rounded-3xl p-5",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(m,{className:"w-16 h-16 rounded-full shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx(m,{className:"h-5 w-32 rounded-lg"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(m,{className:"h-4 w-14 rounded-lg"}),e.jsx(m,{className:"h-4 w-20 rounded-lg"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{className:"h-5 w-20 rounded-full"}),e.jsx(m,{className:"h-5 w-24 rounded-full"})]}),e.jsx(m,{className:"h-4 w-full rounded-lg"})]})]})},p))})}),He=l.memo(function(){const[,s]=C(),{t:r,i18n:p}=S();p.language;const[n,u]=l.useState(""),{user:c}=I();l.useEffect(()=>{const a={location:"SearchTaskersScreen.tsx:179",message:"Component mounted",data:{hasCurrentUser:!!c,currentUserId:c==null?void 0:c.id},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"B"};console.log("[DEBUG] SearchTaskersScreen mounted:",a),fetch("http://127.0.0.1:7242/ingest/a1cd6507-d4e0-471c-acc6-10053f70247e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{})},[c]);const h=l.useMemo(()=>{const a=new URLSearchParams;return n&&a.set("search",n),a.toString()},[n]),{data:o,isLoading:x}=D({queryKey:["/api/taskers/search",h],queryFn:async()=>{const a={location:"SearchTaskersScreen.tsx:192",message:"Fetching taskers",data:{queryParams:h},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"};console.log("[DEBUG] Fetching taskers:",a),fetch("http://127.0.0.1:7242/ingest/a1cd6507-d4e0-471c-acc6-10053f70247e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{});const g=await fetch(`/api/taskers/search?${h}`);if(!g.ok)throw new Error("Failed to fetch taskers");const i=await g.json(),b={location:"SearchTaskersScreen.tsx:196",message:"Taskers fetched",data:{count:i==null?void 0:i.length,firstTasker:i!=null&&i[0]?{id:i[0].id,name:i[0].name,username:i[0].username}:null,allUsernames:i==null?void 0:i.map(k=>k.username)},timestamp:Date.now(),sessionId:"debug-session",runId:"run1",hypothesisId:"A"};return console.log("[DEBUG] Taskers fetched:",b),fetch("http://127.0.0.1:7242/ingest/a1cd6507-d4e0-471c-acc6-10053f70247e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}).catch(()=>{}),i}}),d=l.useCallback(()=>{u("")},[]),f=(o==null?void 0:o.length)||0;return e.jsxs("div",{className:"min-h-screen gradient-mesh pt-safe pb-32",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(t.div,{initial:{opacity:0,scale:.8},animate:{opacity:.5,scale:1},transition:{duration:1},className:"absolute -top-24 -right-24 w-80 h-80 bg-gradient-to-br from-primary/25 to-primary/5 rounded-full blur-3xl rtl:-left-24 rtl:right-auto"}),e.jsx(t.div,{initial:{opacity:0},animate:{opacity:.25},transition:{delay:.3},className:"absolute top-60 -left-20 w-48 h-48 bg-gradient-to-tr from-accent/25 to-transparent rounded-full blur-3xl rtl:-right-20 rtl:left-auto"})]}),e.jsxs(t.div,{variants:w,initial:"hidden",animate:"visible",className:"relative z-10 px-5 py-5",children:[e.jsxs(t.div,{variants:j,className:"flex items-center gap-4 mb-6",children:[e.jsx(t.button,{whileHover:{scale:1.05},whileTap:{scale:.92},onClick:()=>s("/home"),className:"w-11 h-11 flex items-center justify-center rounded-2xl glass","data-testid":"button-back-search",children:e.jsx(G,{className:"w-5 h-5 text-foreground/80 rtl:rotate-180"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-extrabold text-foreground tracking-tight",children:r("taskers.title","Find Taskers")}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-0.5",children:[f," ",r("taskers.available","taskers available")]})]})]}),e.jsx(t.div,{variants:j,className:"relative mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 via-accent/20 to-primary/20 rounded-3xl blur-xl opacity-50"}),e.jsx("div",{className:"relative glass-premium rounded-3xl p-1 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center shrink-0",children:e.jsx(A,{className:"w-6 h-6 text-primary"})}),e.jsx("input",{type:"search",placeholder:r("taskers.searchPlaceholder","Search by name..."),value:n,onChange:a=>u(a.target.value),className:"flex-1 bg-transparent text-foreground placeholder:text-muted-foreground/60 focus:outline-none text-lg font-medium","data-testid":"input-search-taskers"}),e.jsx(v,{children:n&&e.jsx(t.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:d,className:"w-10 h-10 flex items-center justify-center rounded-xl bg-muted/50 hover:bg-muted transition-colors shrink-0","data-testid":"button-clear-search",children:e.jsx(N,{className:"w-5 h-5 text-muted-foreground"})})})]})})]})})]}),e.jsx("div",{className:"relative z-10 px-5",children:e.jsx(v,{mode:"wait",children:x?e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(q,{count:4})},"loading"):o&&o.length>0?e.jsx(t.div,{variants:w,initial:"hidden",animate:"visible",className:"space-y-4",children:o.map((a,g)=>e.jsx(t.div,{variants:j,children:e.jsx(J,{tasker:a,index:g})},a.id))},"taskers"):e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(E,{icon:e.jsx(Users,{className:"w-8 h-8"}),title:r("taskers.empty.title","No taskers found"),description:r("taskers.empty.description","Try adjusting your filters or search terms"),action:n&&e.jsxs(t.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:d,className:"glass-premium text-foreground px-6 py-3 rounded-2xl font-bold flex items-center gap-2","data-testid":"button-clear-search",children:[e.jsx(N,{className:"w-4 h-4"}),r("taskers.clearSearch","Clear search")]})})},"empty")})})]})});export{He as default};
