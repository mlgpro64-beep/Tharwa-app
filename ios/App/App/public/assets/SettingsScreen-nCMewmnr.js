const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BawsCdAI.js","assets/index-CzK-Wtpj.js","assets/index-Zz6v0Wf2.css","assets/useMutation-BXgiM4Zs.js","assets/utils-km2FGkQ4.js","assets/lock-B56TYpix.js","assets/sun-BjJkm-rc.js","assets/file-text-ZpwEK5vc.js","assets/shield-Cglcz5iT.js","assets/arrow-left-eQXjCarb.js","assets/chevron-right-MByHq59g.js","assets/briefcase-CG3vAR-K.js","assets/log-out-PQe0qTlg.js","assets/check-BpdMCCzI.js"])))=>i.map(i=>d[i]);
import{r as g,d as V,e as q,_ as Q,b as ne,u as ue,a as he,U as me,j as s,m as x,c as S,g as X,A as pe}from"./index-CzK-Wtpj.js";import{u as K}from"./useMutation-BXgiM4Zs.js";import{L as ge}from"./lock-B56TYpix.js";import{a as fe,F as be,B as we,L as xe,C as ye,M as Z,S as ee,A as ve}from"./sun-BjJkm-rc.js";import{F as je}from"./file-text-ZpwEK5vc.js";import{S as te}from"./shield-Cglcz5iT.js";import{A as ke}from"./arrow-left-eQXjCarb.js";import{C as B}from"./chevron-right-MByHq59g.js";import{B as se}from"./briefcase-CG3vAR-K.js";import{L as Pe}from"./log-out-PQe0qTlg.js";import{C as ie}from"./check-BpdMCCzI.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */var R;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(R||(R={}));class H extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Ne=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Ce=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},n=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:Ne(r),i=()=>a()!=="web",c=l=>{const f=h.get(l);return!!(f!=null&&f.platforms.has(a())||m(l))},m=l=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(T=>T.name===l)},b=l=>r.console.error(l),h=new Map,P=(l,f={})=>{const T=h.get(l);if(T)return console.warn(`Capacitor plugin "${l}" already registered. Cannot register plugins twice.`),T.proxy;const d=a(),p=m(l);let w;const v=async()=>(!w&&d in f?w=typeof f[d]=="function"?w=await f[d]():w=f[d]:e!==null&&!w&&"web"in f&&(w=typeof f.web=="function"?w=await f.web():w=f.web),w),N=(o,y)=>{var k,L;if(p){const E=p==null?void 0:p.methods.find(j=>y===j.name);if(E)return E.rtype==="promise"?j=>t.nativePromise(l,y.toString(),j):(j,_)=>t.nativeCallback(l,y.toString(),j,_);if(o)return(k=o[y])===null||k===void 0?void 0:k.bind(o)}else{if(o)return(L=o[y])===null||L===void 0?void 0:L.bind(o);throw new H(`"${l}" plugin is not implemented on ${d}`,R.Unimplemented)}},C=o=>{let y;const k=(...L)=>{const E=v().then(j=>{const _=N(j,o);if(_){const I=_(...L);return y=I==null?void 0:I.remove,I}else throw new H(`"${l}.${o}()" is not implemented on ${d}`,R.Unimplemented)});return o==="addListener"&&(E.remove=async()=>y()),E};return k.toString=()=>`${o.toString()}() { [capacitor code] }`,Object.defineProperty(k,"name",{value:o,writable:!1,configurable:!1}),k},$=C("addListener"),U=C("removeListener"),F=(o,y)=>{const k=$({eventName:o},y),L=async()=>{const j=await k;U({eventName:o,callbackId:j},y)},E=new Promise(j=>k.then(()=>j({remove:L})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},E},M=new Proxy({},{get(o,y){switch(y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?F:$;case"removeListener":return U;default:return C(y)}}});return n[l]=M,h.set(l,{name:l,proxy:M,platforms:new Set([...Object.keys(f),...p?[d]:[]])}),M};return t.convertFileSrc||(t.convertFileSrc=l=>l),t.getPlatform=a,t.handleError=b,t.isNativePlatform=i,t.isPluginAvailable=c,t.registerPlugin=P,t.Exception=H,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Le=r=>r.Capacitor=Ce(r),A=Le(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),oe=A.registerPlugin;class ce{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const a=this.listeners[e];if(!a){if(n){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}a.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new A.Exception(e,R.Unimplemented)}unavailable(e="not available"){return new A.Exception(e,R.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const a=n.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const re=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ae=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Se extends ce{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[a,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=ae(a).trim(),i=ae(i).trim(),t[a]=i}),t}async setCookie(e){try{const t=re(e.key),n=re(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${a}; path=${i}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}oe("CapacitorCookies",{web:()=>new Se});const Ee=async r=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const a=n.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>t(a),n.readAsDataURL(r)}),Ae=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(a=>a.toLocaleLowerCase()).reduce((a,i,c)=>(a[i]=r[e[c]],a),{})},Te=(r,e=!0)=>r?Object.entries(r).reduce((n,a)=>{const[i,c]=a;let m,b;return Array.isArray(c)?(b="",c.forEach(h=>{m=e?encodeURIComponent(h):h,b+=`${i}=${m}&`}),b.slice(0,-1)):(m=e?encodeURIComponent(c):c,b=`${i}=${m}`),`${n}&${b}`},"").substr(1):null,Oe=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),a=Ae(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[c,m]of Object.entries(r.data||{}))i.set(c,m);t.body=i.toString()}else if(a.includes("multipart/form-data")||r.data instanceof FormData){const i=new FormData;if(r.data instanceof FormData)r.data.forEach((m,b)=>{i.append(b,m)});else for(const m of Object.keys(r.data))i.append(m,r.data[m]);t.body=i;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(a.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class $e extends ce{async request(e){const t=Oe(e,e.webFetchExtra),n=Te(e.params,e.shouldEncodeUrlParams),a=n?`${e.url}?${n}`:e.url,i=await fetch(a,t),c=i.headers.get("content-type")||"";let{responseType:m="text"}=i.ok?e:{};c.includes("application/json")&&(m="json");let b,h;switch(m){case"arraybuffer":case"blob":h=await i.blob(),b=await Ee(h);break;case"json":b=await i.json();break;case"document":case"text":default:b=await i.text()}const P={};return i.headers.forEach((l,f)=>{P[f]=l}),{data:b,headers:P,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}oe("CapacitorHttp",{web:()=>new $e});function Ue(){const[r,e]=g.useState(!1),[t,n]=g.useState(!1),[a,i]=g.useState("default"),{toast:c}=V(),m=K({mutationFn:async d=>(await q("POST","/api/push/subscribe",d)).json(),onSuccess:()=>{n(!0),c({title:"تم تفعيل الإشعارات",description:"ستتلقى إشعارات فورية"})},onError:d=>{console.error("[Push] Subscribe error:",d),c({title:"خطأ",description:"فشل في تفعيل الإشعارات",variant:"destructive"})}}),b=K({mutationFn:async()=>(await q("POST","/api/push/unsubscribe")).json(),onSuccess:()=>{n(!1),c({title:"تم إلغاء الإشعارات",description:"لن تتلقى إشعارات فورية بعد الآن"})}});g.useEffect(()=>{(async()=>{if(A.isNativePlatform())try{const{PushNotifications:p}=await Q(async()=>{const{PushNotifications:v}=await import("./index-BawsCdAI.js");return{PushNotifications:v}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]));e(!0);const w=await p.checkPermissions();i(w.receive==="granted"?"granted":"default"),await p.addListener("registration",v=>{console.log("[Push] Native token:",v.value),m.mutate({endpoint:`native:${A.getPlatform()}:${v.value}`,p256dh:"native",auth:"native",deviceType:A.getPlatform()})}),await p.addListener("pushNotificationReceived",v=>{console.log("[Push] Notification received:",v)}),await p.addListener("pushNotificationActionPerformed",v=>{var N;console.log("[Push] Action performed:",v),(N=v.notification.data)!=null&&N.url&&(window.location.href=v.notification.data.url)})}catch(p){console.error("[Push] Native init error:",p),e(!1)}else if("Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window){e(!0),i(Notification.permission);try{const w=await(await navigator.serviceWorker.ready).pushManager.getSubscription();n(!!w)}catch(p){console.error("[Push] Failed to check subscription:",p)}}})()},[]);const h=g.useCallback(async()=>{try{let d=await navigator.serviceWorker.getRegistration("/sw.js");return d||(d=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("[Push] Service worker registered")),await navigator.serviceWorker.ready,d}catch(d){return console.error("[Push] Service worker registration failed:",d),null}},[]),P=g.useCallback(async()=>{var d,p,w,v;try{if(!await h())throw new Error("Failed to register service worker");const C=await Notification.requestPermission();if(i(C),C!=="granted"){c({title:"تم رفض الإذن",description:"يرجى السماح بالإشعارات من إعدادات المتصفح",variant:"destructive"});return}const $=await fetch("/api/push/vapid-key");if(!$.ok)throw new Error("Failed to fetch VAPID key");const{publicKey:U}=await $.json();if(!U)throw new Error("No VAPID public key returned");const o=(await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ie(U)})).toJSON();if(!o.endpoint||!((d=o.keys)!=null&&d.p256dh)||!((p=o.keys)!=null&&p.auth))throw new Error("Invalid subscription: missing required fields");console.log("[Push] Web subscription created, keys present:",!!((w=o.keys)!=null&&w.p256dh),!!((v=o.keys)!=null&&v.auth)),m.mutate({endpoint:o.endpoint,p256dh:o.keys.p256dh,auth:o.keys.auth,deviceType:"web"})}catch(N){console.error("[Push] Subscribe error:",N),c({title:"خطأ",description:N.message||"فشل في تفعيل الإشعارات",variant:"destructive"})}},[h,m,c]),l=g.useCallback(async()=>{try{const{PushNotifications:d}=await Q(async()=>{const{PushNotifications:w}=await import("./index-BawsCdAI.js");return{PushNotifications:w}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]));(await d.requestPermissions()).receive==="granted"?(await d.register(),i("granted")):c({title:"تم رفض الإذن",description:"يرجى السماح بالإشعارات من الإعدادات",variant:"destructive"})}catch(d){console.error("[Push] Native permission error:",d),c({title:"خطأ",description:"فشل في تفعيل الإشعارات",variant:"destructive"})}},[c]),f=g.useCallback(async()=>{A.isNativePlatform()?await l():await P()},[l,P]),T=g.useCallback(async()=>{try{if(!A.isNativePlatform()){const p=await(await navigator.serviceWorker.ready).pushManager.getSubscription();p&&await p.unsubscribe()}b.mutate()}catch(d){console.error("[Push] Unsubscribe error:",d)}},[b]);return{isSupported:r,isSubscribed:t,permission:a,subscribe:f,unsubscribe:T,isLoading:m.isPending||b.isPending}}function Ie(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length);for(let i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}function _e(){const[r,e]=g.useState(!1),[t,n]=g.useState(!1),{user:a}=ne(),{toast:i}=V(),c=K({mutationFn:async l=>(await q("PATCH","/api/users/me",{biometricEnabled:l})).json(),onSuccess:l=>{n(l.biometricEnabled)}}),m=g.useCallback(async()=>{if(A.isNativePlatform())return e(!0),!0;if(window.PublicKeyCredential)try{const l=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();return e(l),l}catch{return!1}return!1},[]),b=g.useCallback(async()=>{if(A.isNativePlatform())return i({title:"Face ID / Touch ID",description:"سيتم تفعيل هذه الميزة قريباً"}),{success:!1,error:"Native biometrics require additional plugin"};if(window.PublicKeyCredential)try{return i({title:"البصمة / Face ID",description:"متاحة على التطبيق الأصلي فقط"}),{success:!1,error:"Web biometrics not fully implemented"}}catch(l){return{success:!1,error:l.message}}return{success:!1,error:"Biometrics not supported"}},[i]),h=g.useCallback(async()=>(await b()).success?(c.mutate(!0),i({title:"تم تفعيل البصمة",description:"يمكنك الآن تسجيل الدخول بالبصمة"}),!0):!1,[b,c,i]),P=g.useCallback(async()=>{c.mutate(!1),i({title:"تم إلغاء البصمة",description:"لن يتم استخدام البصمة لتسجيل الدخول"})},[c,i]);return{isSupported:r,isEnabled:(a==null?void 0:a.biometricEnabled)||t,checkAvailability:m,authenticate:b,enable:h,disable:P,isLoading:c.isPending}}const Re=g.memo(function(){const[,e]=ue(),{t,i18n:n}=he(),{theme:a,toggleTheme:i,userRole:c,switchRole:m,logout:b,user:h}=ne(),{toast:P}=V(),[l,f]=g.useState(!1),{isSupported:T,isSubscribed:d,subscribe:p,unsubscribe:w,isLoading:v}=Ue(),{isSupported:N,isEnabled:C,enable:$,disable:U,checkAvailability:F,isLoading:M}=_e();g.useEffect(()=>{F()},[F]);const o=n.language==="ar",y=t(o?"settings.arabic":"settings.english"),k=g.useCallback(async()=>{d?await w():await p()},[d,p,w]),L=g.useCallback(async()=>{C?await U():await $()},[C,$,U]),E=g.useCallback(()=>{b(),e("/")},[b,e]),j=g.useCallback(u=>{n.changeLanguage(u),f(!1)},[n]),_=g.useCallback(async()=>{const u=await m(c==="client"?"tasker":"client");u.success||P({title:o?"خطأ":"Error",description:u.error||(o?"فشل في تبديل الدور":"Failed to switch role"),variant:"destructive"})},[m,c,P,o]),I=g.useMemo(()=>[{icon:me,label:t("profile.editProfile"),path:"/profile/edit"},{icon:ge,label:t("settings.changePassword"),action:()=>{}},...T?[{icon:fe,label:o?"الإشعارات الفورية":"Push Notifications",toggle:!0,value:d,action:k}]:[],...N?[{icon:be,label:o?"تسجيل الدخول بالبصمة":"Face ID / Touch ID",toggle:!0,value:C,action:L}]:[],...c==="tasker"?[{icon:we,label:t("settings.verifyIdentity"),path:"/verify",iconColor:"text-accent"}]:[]],[t,c,T,d,k,N,C,L,o]),z=g.useMemo(()=>[{icon:xe,label:t("settings.language"),rightText:y,action:()=>f(!0)}],[t,y]),G=g.useMemo(()=>[{icon:ye,label:t("settings.help"),path:"/help"},{icon:je,label:t("settings.terms"),path:"/terms"},{icon:te,label:t("settings.privacy_policy"),path:"/privacy"}],[t]),D=g.useMemo(()=>h!=null&&h.isAdmin?[{icon:te,label:o?"لوحة الأدمن":"Admin Panel",path:"/admin",iconColor:"text-amber-500"}]:[],[h==null?void 0:h.isAdmin,o]),W=(u,O,le)=>{const de=u.icon,J=S("flex items-center justify-between p-4 transition-all hover:bg-white/5 w-full",O<le-1&&"border-b border-white/10"),Y=s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:S("w-11 h-11 rounded-2xl flex items-center justify-center",u.destructive?"bg-destructive/15":"bg-primary/15"),children:s.jsx(de,{className:S("w-5 h-5",u.iconColor||(u.destructive?"text-destructive":"text-primary"))})}),s.jsx("span",{className:S("font-medium text-start",u.destructive?"text-destructive":"text-foreground"),children:u.label})]}),u.toggle?s.jsx("div",{className:S("w-14 h-8 rounded-full transition-all relative flex-shrink-0",u.value?"gradient-primary shadow-lg shadow-primary/30":"bg-muted"),children:s.jsx(x.div,{animate:{x:u.value?24:4},transition:{type:"spring",stiffness:500,damping:30},className:"w-6 h-6 bg-white rounded-full absolute top-1 shadow-sm"})}):u.rightText?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:u.rightText}),s.jsx(B,{className:"w-5 h-5 text-muted-foreground rtl:rotate-180"})]}):s.jsx(B,{className:"w-5 h-5 text-muted-foreground rtl:rotate-180"})]});return u.path?s.jsx(X,{href:u.path,children:s.jsx(x.div,{whileTap:{scale:.98},className:J,"data-testid":`link-${u.label.toLowerCase().replace(/\s+/g,"-")}`,children:Y})},u.label):s.jsx(x.button,{onClick:u.action,whileTap:{scale:.98},className:J,"data-testid":`button-${u.label.toLowerCase().replace(/\s+/g,"-")}`,children:Y},u.label)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-primary/5 pt-safe pb-40",children:[s.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:s.jsx(x.div,{initial:{opacity:0},animate:{opacity:.3},className:"absolute top-40 -right-20 w-64 h-64 bg-accent/20 rounded-full blur-3xl"})}),s.jsxs("div",{className:"relative z-10 px-6 py-6",children:[s.jsxs(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center gap-4 mb-8",children:[s.jsx(x.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.history.back(),className:"w-11 h-11 flex items-center justify-center rounded-2xl glass","data-testid":"button-back",children:s.jsx(ke,{className:"w-5 h-5 rtl:rotate-180"})}),s.jsx("h1",{className:"text-2xl font-extrabold text-foreground",children:t("settings.title")})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[s.jsx("h2",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-3 px-1",children:t("settings.account")}),s.jsx("div",{className:"glass rounded-3xl overflow-hidden",children:I.map((u,O)=>W(u,O,I.length))})]}),s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[s.jsx("h2",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-3 px-1",children:t("settings.preferences")}),s.jsxs("div",{className:"glass rounded-3xl overflow-hidden",children:[z.map((u,O)=>W(u,O,z.length)),s.jsxs(x.button,{onClick:i,whileTap:{scale:.98},className:"flex items-center justify-between p-4 transition-all hover:bg-white/5 w-full","data-testid":"button-theme-toggle",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 rounded-2xl flex items-center justify-center bg-primary/15",children:a==="dark"?s.jsx(Z,{className:"w-5 h-5 text-primary"}):s.jsx(ee,{className:"w-5 h-5 text-primary"})}),s.jsx("span",{className:"font-medium text-foreground text-start",children:t("settings.darkMode")})]}),s.jsxs("div",{className:"flex items-center gap-2 p-1 rounded-full bg-muted/50",children:[s.jsx(x.button,{whileTap:{scale:.95},onClick:u=>{u.stopPropagation(),a==="dark"&&i()},className:S("w-9 h-9 rounded-full flex items-center justify-center transition-all",a==="light"?"gradient-primary text-white shadow-lg":"text-muted-foreground hover:text-foreground"),children:s.jsx(ee,{className:"w-4 h-4"})}),s.jsx(x.button,{whileTap:{scale:.95},onClick:u=>{u.stopPropagation(),a==="light"&&i()},className:S("w-9 h-9 rounded-full flex items-center justify-center transition-all",a==="dark"?"gradient-primary text-white shadow-lg":"text-muted-foreground hover:text-foreground"),children:s.jsx(Z,{className:"w-4 h-4"})})]})]})]})]}),(h==null?void 0:h.verificationStatus)==="approved"&&s.jsxs(x.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},whileHover:{scale:1.01},whileTap:{scale:.98},onClick:_,className:"w-full p-4 bg-primary/10 border-2 border-primary/30 rounded-2xl flex items-center justify-between transition-all hover:bg-primary/15","data-testid":"button-switch-mode",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 bg-primary/20 rounded-2xl flex items-center justify-center",children:s.jsx(ve,{className:"w-5 h-5 text-primary"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("span",{className:"font-bold text-foreground block",children:t(c==="client"?"settings.switchToTasker":"settings.switchToClient")}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t("settings.switchModeDesc")})]})]}),s.jsx(B,{className:"w-5 h-5 text-primary rtl:rotate-180"})]}),!(h!=null&&h.verificationStatus)&&c==="client"&&s.jsx(X,{href:"/tasker-type",children:s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},whileHover:{scale:1.01},whileTap:{scale:.98},className:"w-full p-4 bg-accent/10 border-2 border-accent/30 rounded-2xl flex items-center justify-between transition-all hover:bg-accent/15 cursor-pointer","data-testid":"button-become-tasker",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 bg-accent/20 rounded-2xl flex items-center justify-center",children:s.jsx(se,{className:"w-5 h-5 text-accent"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("span",{className:"font-bold text-foreground block",children:o?"أصبح منفذًا":"Become a Tasker"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:o?"قدم للانضمام كمنفذ":"Apply to join as a tasker"})]})]}),s.jsx(B,{className:"w-5 h-5 text-accent rtl:rotate-180"})]})}),(h==null?void 0:h.verificationStatus)==="pending"&&c==="client"&&s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"w-full p-4 bg-warning/10 border-2 border-warning/30 rounded-2xl flex items-center justify-between","data-testid":"status-pending-tasker",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-11 h-11 bg-warning/20 rounded-2xl flex items-center justify-center",children:s.jsx(se,{className:"w-5 h-5 text-warning"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("span",{className:"font-bold text-foreground block",children:o?"طلبك قيد المراجعة":"Application Under Review"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:o?"سيتم إشعارك عند الموافقة":"You will be notified upon approval"})]})]})}),D.length>0&&s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.28},children:[s.jsx("h2",{className:"text-xs font-bold text-amber-500 uppercase tracking-widest mb-3 px-1",children:o?"الإدارة":"Administration"}),s.jsx("div",{className:"glass rounded-3xl overflow-hidden border border-amber-500/30",children:D.map((u,O)=>W(u,O,D.length))})]}),s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsx("h2",{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest mb-3 px-1",children:t("settings.support")}),s.jsx("div",{className:"glass rounded-3xl overflow-hidden",children:G.map((u,O)=>W(u,O,G.length))})]}),s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},children:s.jsxs(x.button,{onClick:E,whileHover:{scale:1.01},whileTap:{scale:.98},className:"w-full p-4 glass rounded-2xl flex items-center justify-center gap-3 transition-all hover:bg-white/5","data-testid":"button-logout",children:[s.jsx(Pe,{className:"w-5 h-5 text-foreground"}),s.jsx("span",{className:"font-bold text-foreground",children:t("auth.logout")})]})}),s.jsxs(x.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center text-xs text-muted-foreground pt-6 pb-8",children:[t("welcome.title")," v1.0.0"]})]})]}),s.jsx(pe,{children:l&&s.jsxs(s.Fragment,{children:[s.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"fixed inset-0 bg-black/60 z-50"}),s.jsxs(x.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 inset-x-0 z-50 bg-card rounded-t-3xl p-6 pb-safe",children:[s.jsx("div",{className:"w-12 h-1.5 bg-muted rounded-full mx-auto mb-6"}),s.jsx("h3",{className:"text-lg font-bold mb-4",children:t("settings.language")}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>j("ar"),className:S("w-full p-4 rounded-2xl flex items-center justify-between transition-all",o?"bg-primary/15 border-2 border-primary":"bg-muted/50 border-2 border-transparent"),"data-testid":"button-language-arabic",children:[s.jsx("span",{className:S("font-medium",o&&"text-primary"),children:t("settings.arabic")}),o&&s.jsx(ie,{className:"w-5 h-5 text-primary"})]}),s.jsxs("button",{onClick:()=>j("en"),className:S("w-full p-4 rounded-2xl flex items-center justify-between transition-all",o?"bg-muted/50 border-2 border-transparent":"bg-primary/15 border-2 border-primary"),"data-testid":"button-language-english",children:[s.jsx("span",{className:S("font-medium",!o&&"text-primary"),children:t("settings.english")}),!o&&s.jsx(ie,{className:"w-5 h-5 text-primary"})]})]})]})]})})]})}),Je=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{Je as S,oe as r};
