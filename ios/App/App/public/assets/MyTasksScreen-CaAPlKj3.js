import{r as l,u as g,j as e,m as a,P as b,c as n,A as w,g as j}from"./index-CzK-Wtpj.js";import{T as k}from"./TaskCard-a_kB6T9e.js";import{u as v}from"./useQuery-B1e_qTp-.js";import{E as c,T as N}from"./animated-ifqYnJC-.js";import{C as d}from"./clipboard-list-B8-J9jf1.js";import{F as T}from"./filter-CpO21OEq.js";import"./currency-BA8TA7a2.js";import"./schema-CbH_BfFp.js";import"./heart-BRsyov3V.js";import"./dollar-sign-EFTHd7iI.js";import"./chevron-right-MByHq59g.js";import"./utils-km2FGkQ4.js";const q=l.memo(function(){const[,p]=g(),[i,m]=l.useState("all"),x=!!localStorage.getItem("userId"),{data:s,isLoading:y,error:h}=v({queryKey:["/api/tasks/my"],enabled:x}),r=l.useMemo(()=>s?i==="all"?s:s.filter(t=>t.status===i):[],[s,i]),u=l.useMemo(()=>[{id:"all",label:"All"},{id:"open",label:"Open"},{id:"in_progress",label:"In Progress"},{id:"completed",label:"Completed"}],[]),f=l.useCallback(t=>s?t==="all"?s.length:s.filter(o=>o.status===t).length:0,[s]);return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-background to-primary/5 pt-safe pb-24 flex items-center justify-center",children:e.jsx(c,{icon:e.jsx(d,{className:"w-8 h-8"}),title:"Something went wrong",description:"We couldn't load your tasks. Please try again.",action:e.jsx(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.reload(),className:"px-6 py-3 gradient-primary text-white rounded-xl font-bold",children:"Retry"})})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background via-background to-primary/5 pt-safe pb-24",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx(a.div,{initial:{opacity:0},animate:{opacity:.3},className:"absolute top-20 -right-20 w-64 h-64 bg-accent/20 rounded-full blur-3xl"})}),e.jsxs("div",{className:"relative z-10 px-6 py-6",children:[e.jsxs(a.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-foreground",children:"My Tasks"}),e.jsx(a.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p("/post-task/1"),className:"w-12 h-12 gradient-primary rounded-2xl flex items-center justify-center text-white shadow-lg shadow-primary/30","data-testid":"button-add-task",children:e.jsx(b,{className:"w-5 h-5"})})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex gap-2 overflow-x-auto no-scrollbar pb-2 -mx-6 px-6 mb-6",children:u.map((t,o)=>e.jsxs(a.button,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1+o*.05},whileTap:{scale:.95},onClick:()=>m(t.id),"data-testid":`button-tab-${t.id}`,className:n("px-5 py-2.5 rounded-2xl font-bold text-sm whitespace-nowrap transition-all flex items-center gap-2",i===t.id?"gradient-primary text-white shadow-lg shadow-primary/25":"glass text-muted-foreground"),children:[t.label,e.jsx("span",{className:n("px-2 py-0.5 rounded-full text-xs font-bold",i===t.id?"bg-white/20":"bg-muted"),children:f(t.id)})]},t.id))}),e.jsx(w,{mode:"wait",children:y?e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(N,{count:3})},"loading"):r.length>0?e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:r.map((t,o)=>e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},children:e.jsx(k,{task:t,showSaveButton:!1})},t.id))},"tasks"):e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(c,{icon:i==="all"?e.jsx(d,{className:"w-8 h-8"}):e.jsx(T,{className:"w-8 h-8"}),title:i==="all"?"No tasks yet":`No ${i.replace("_"," ")} tasks`,description:i==="all"?"Post your first task to get started":"Tasks will appear here when they match this filter",action:i==="all"?e.jsx(j,{href:"/post-task/1",children:e.jsx(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-6 py-3 gradient-primary text-white rounded-xl font-bold shadow-lg shadow-primary/25",children:"Post a Task"})}):void 0})},"empty")})]})]})});export{q as default};
