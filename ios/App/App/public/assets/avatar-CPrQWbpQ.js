import{v as I,r as n,j as u,w as v,x as j,y as f,c as m}from"./index-CzK-Wtpj.js";var g="Avatar",[k,q]=I(g),[C,x]=k(g),S=n.forwardRef((a,e)=>{const{__scopeAvatar:r,...s}=a,[o,t]=n.useState("idle");return u.jsx(C,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:t,children:u.jsx(v.span,{...s,ref:e})})});S.displayName=g;var w="AvatarImage",L=n.forwardRef((a,e)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:o=()=>{},...t}=a,i=x(w,r),d=_(s,t),l=j(c=>{o(c),i.onImageLoadingStatusChange(c)});return f(()=>{d!=="idle"&&l(d)},[d,l]),d==="loaded"?u.jsx(v.img,{...t,ref:e,src:s}):null});L.displayName=w;var b="AvatarFallback",y=n.forwardRef((a,e)=>{const{__scopeAvatar:r,delayMs:s,...o}=a,t=x(b,r),[i,d]=n.useState(s===void 0);return n.useEffect(()=>{if(s!==void 0){const l=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(l)}},[s]),i&&t.imageLoadingStatus!=="loaded"?u.jsx(v.span,{...o,ref:e}):null});y.displayName=b;function A(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function _(a,{referrerPolicy:e,crossOrigin:r}){const s=M(),o=n.useRef(null),t=s?(o.current||(o.current=new window.Image),o.current):null,[i,d]=n.useState(()=>A(t,a));return f(()=>{d(A(t,a))},[t,a]),f(()=>{const l=R=>()=>{d(R)};if(!t)return;const c=l("loaded"),p=l("error");return t.addEventListener("load",c),t.addEventListener("error",p),e&&(t.referrerPolicy=e),typeof r=="string"&&(t.crossOrigin=r),()=>{t.removeEventListener("load",c),t.removeEventListener("error",p)}},[t,r,e]),i}function F(){return()=>{}}function M(){return n.useSyncExternalStore(F,()=>!0,()=>!1)}var h=S,N=L,E=y;const P=n.forwardRef(({className:a,...e},r)=>u.jsx(h,{ref:r,className:m(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,a),...e}));P.displayName=h.displayName;const T=n.forwardRef(({className:a,...e},r)=>u.jsx(N,{ref:r,className:m("aspect-square h-full w-full",a),...e}));T.displayName=N.displayName;const $=n.forwardRef(({className:a,...e},r)=>u.jsx(E,{ref:r,className:m("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));$.displayName=E.displayName;export{P as A,T as a,$ as b};
